@{
    ViewData["Title"] = "Game Management";
}

<div class="container">
    <div class="row">
        <div class="col-md-12">
            <h1 class="mt-4">Team Management</h1>
        </div>
    </div>

    <div class="row mt-4">
        <!-- Left Column with Buttons -->
        <div class="col-md-3">
            <h2>Actions</h2>
            <div class="list-group" id="actionTabs" role="tablist">
                <a class="list-group-item list-group-item-action active" id="add-teams-tab" data-bs-toggle="pill" href="#add-teams" role="tab" aria-controls="add-teams" aria-selected="true">Add Teams</a>
                <a class="list-group-item list-group-item-action" id="record-matches-tab" data-bs-toggle="pill" href="#record-matches" role="tab" aria-controls="record-matches" aria-selected="false">Record Matches</a>
                <a class="list-group-item list-group-item-action" id="win-loss-record-tab" data-bs-toggle="pill" href="#win-loss-record" role="tab" aria-controls="win-loss-record" aria-selected="false">Get Win-Loss Record</a>
            </div>
        </div>

        <!-- Right Column with Tab Content -->
        <div class="col-md-9">
            <div class="tab-content" id="actionTabsContent">
                <!-- Add Teams Tab -->
                <div class="tab-pane fade show active" id="add-teams" role="tabpanel" aria-labelledby="add-teams-tab">
                    <h2>Add Teams</h2>
                    <p>Click the button below to add the Dallas Cowboys and Atlanta Falcons to the team list.</p>
                    <form asp-action="AddTeams" asp-controller="Games" method="post">
                        <button type="submit" class="btn btn-primary">Add Dallas Cowboys and Atlanta Falcons</button>
                    </form>

                    @if (ViewBag.AddedTeams != null)
                    {
                        <div class="mt-3">
                            <h3>Teams Added:</h3>
                            <ul class="list-group">
                                @foreach (var team in ViewBag.AddedTeams)
                                {
                                    <li class="list-group-item">@team.Name</li>
                                }
                            </ul>
                        </div>
                    }
                    else if (ViewBag.ErrorMessage != null)
                    {
                        <div class="alert alert-danger mt-3" role="alert">
                            @ViewBag.ErrorMessage
                        </div>
                    }
                    else
                    {
                        <div class="alert alert-info mt-3" role="alert">
                            No teams added yet.
                        </div>
                    }
                </div>

                <!-- Record Matches Tab -->
                <div class="tab-pane fade" id="record-matches" role="tabpanel" aria-labelledby="record-matches-tab">
                    <h2>Record Matches</h2>
                    <p>Click the button below to record 28 matches between the teams.</p>
                    <form asp-action="RecordMatches" asp-controller="Games" method="post">
                        <button type="submit" class="btn btn-primary">Record 28 Matches</button>
                    </form>

                    @if (ViewBag.RecordedMatches != null)
                    {
                        <div class="mt-3">
                            <h3>Matches Recorded:</h3>
                            <ul class="list-group">
                                @foreach (var match in ViewBag.RecordedMatches)
                                {
                                    <li class="list-group-item">Match on @match.Date: @match.WinningTeamName vs @match.LosingTeamName</li>
                                }
                            </ul>
                        </div>
                    }
                    else if (ViewBag.ErrorMessage != null)
                    {
                        <div class="alert alert-danger mt-3" role="alert">
                            @ViewBag.ErrorMessage
                        </div>
                    }
                    else
                    {
                        <div class="alert alert-info mt-3" role="alert">
                            No matches recorded yet.
                        </div>
                    }
                </div>

                <!-- Get Win-Loss Record Tab -->
                <div class="tab-pane fade" id="win-loss-record" role="tabpanel" aria-labelledby="win-loss-record-tab">
                    <h2>Get Win-Loss Record</h2>
                    <p>Click the button below to get the win-loss record between the Dallas Cowboys and Atlanta Falcons.</p>
                    <form asp-action="GetWinLossRecord" asp-controller="Games" method="post">
                        <button type="submit" class="btn btn-primary">Get Win-Loss Record</button>
                    </form>

                    @if (ViewBag.WinLossRecord != null)
                    {
                        <div class="mt-3">
                            <h3>Win-Loss Record between Dallas Cowboys and Atlanta Falcons:</h3>
                            <p>@ViewBag.WinLossRecord.WinningTeamName Wins: @ViewBag.WinLossRecord.WinningTeamWins</p>
                            <p>@ViewBag.WinLossRecord.LosingTeamName Wins: @ViewBag.WinLossRecord.LosingTeamWins</p>
                        </div>
                    }
                    else if (ViewBag.ErrorMessage != null)
                    {
                        <div class="alert alert-danger mt-3" role="alert">
                            @ViewBag.ErrorMessage
                        </div>
                    }
                    else
                    {
                        <div class="alert alert-info mt-3" role="alert">
                            No win-loss record available yet.
                        </div>
                    }
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        var triggerTabList = [].slice.call(document.querySelectorAll('#actionTabs a'))
        triggerTabList.forEach(function (triggerEl) {
            var tabTrigger = new bootstrap.Tab(triggerEl)

            triggerEl.addEventListener('click', function (event) {
                event.preventDefault()
                tabTrigger.show()
            })
        })
    });
</script>
